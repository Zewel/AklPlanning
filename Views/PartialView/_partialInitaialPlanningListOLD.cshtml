@model System.Data.DataSet;
@using System.Data;

@foreach (DataRow item in Model.Tables[0].Rows)
{
    <div class="card card-primary">
        <div class="card-header">
            <h3 class="card-title gaugeName_@item.ItemArray[0]">@item.ItemArray[2]</h3>
            <h6 hidden class="gaugeId_@item.ItemArray[0]">@item.ItemArray[1]</h6>
            <button class="btn btn-info" onclick="ActionForSlot(@item.ItemArray[0])" style="float:right">Create Slot</button>
        </div>
        <!-- /.card-header -->
        <!-- form start -->
        <form>
            <div class="card-body table-responsive " style="height:300px">
                <div class="col-md-12 table ">
                    <table class="table  table-bordered table-head-fixed text-nowrap table-hover" id="InitalPlanning_@item.ItemArray[0]">
                        <thead class="fixedHeader-floating">
                            <tr>
                                <th>Action</th>
                                <th>PO No</th>
                                <th>Style No.</th>
                                <th>PO Qty</th>
                                <th>Mcn. Name</th>
                                <th>Last Kn/Factory</th>
                                <th width="4%">Yrn. I/H Date</th>
                                <th>Yrn/T. Date</th>
                                <th>S/App. Date</th>
                                <th>B/H App. Date</th>
                                <th>Test/A. Date</th>
                                <th>Plan. Status</th>
                                <th>Plan. Qty</th>
                                <th>Ini. Plane Date</th>
                                <th>Gauge</th>
                                <th>Po Entry date</th>
                                <th>Remarks</th>
                                <th>Ex-Factory Date</th>
                                <th>PO Color</th>
                                <th>Buyer</th>
                                <th>Merchant</th>
                                <th>Season</th>
                                <th>StyleStatus</th>
                                <th>Ship Mode</th>
                                <th>Month</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (DataRow item1 in Model.Tables[1].AsEnumerable().Where(r => (int)r[17] == Convert.ToInt32(item.ItemArray[1])))
                            {
                                if (Convert.ToInt32(item1.ItemArray[4]) == Convert.ToInt32(item1.ItemArray[19]))
                                {
                                    <tr style="background-color:forestgreen" class="tag">
                                        <td> <input type="checkbox" disabled="disabled" class="checkBoxCls" id="checkboxPrimary3"></td>

                                        <td class="poNo"><a href="#" onclick="ShowStlData(@item1.ItemArray[26]);return false;"><label name="stlNo" style="cursor:pointer">@item1.ItemArray[2] </label></a></td>
                                        <td class="stlNo">@item1.ItemArray[3]</td>
                                        <td class="poQty">@item1.ItemArray[4]</td>
                                        <td class="mcndesc">@item1.ItemArray[20]</td>
                                        <td class="mcndesc">@item1.ItemArray[30]</td>
                                        <td class="yrnInHouseDt">@item1.ItemArray[21]</td>
                                        <td class="yrnTrnDt">@item1.ItemArray[22]</td>
                                        <td class="smpApDt">@item1.ItemArray[23]</td>
                                        <td class="BlkApDt">@item1.ItemArray[24]</td>
                                        <td class="tstApDt">@item1.ItemArray[25]</td>
                                        <td class="PlanStatus">@item1.ItemArray[18]</td>
                                        <td class="planningQty">@item1.ItemArray[19]</td>
                                        <td class="iniPlanDt">@Convert.ToDateTime(item1.ItemArray[5].ToString()).ToString("dd MMM yyyy")</td>
                                        <td class="gaugeDesc">@item1.ItemArray[6]</td>
                                        @{
                                            if (item1.ItemArray[7].ToString() == "1/1/1900 12:00:00 AM" || item1.ItemArray[7].ToString() == "" || item1.ItemArray[7].ToString() == null)
                                            {
                                                <td></td>

                                            }
                                            else
                                            {
                                                <td class="poEntryDt">@Convert.ToDateTime(item1.ItemArray[7].ToString()).ToString("dd MMM yyyy")</td>
                                            }

                                        }
                                        <td class="remarks">@item1.ItemArray[8]</td>
                                        <td class="exfactory">@Convert.ToDateTime(item1.ItemArray[9].ToString()).ToString("dd MMM yyyy")</td>
                                        <td class="pocolor">@item1.ItemArray[10]</td>
                                        <td class="burName">@item1.ItemArray[11]</td>
                                        <td class="merchentNm">@item1.ItemArray[12]</td>
                                        <td class="seasonName">@item1.ItemArray[13]</td>
                                        <td class="stlStatus">@item1.ItemArray[14]</td>
                                        <td class="shipMode">
                                            @item1.ItemArray[15]
                                            <input type="hidden" class="mcnId" value="@item1.ItemArray[27]" />
                                            <input type="hidden" class="stdCode" value="@item1.ItemArray[26]" />
                                            <input type="hidden" class="poCode" value="@item1.ItemArray[01]" />
                                            <input type="hidden" class="smvKn" value="@item1.ItemArray[28]" />
                                            <input type="hidden" class="critType" value="@item1.ItemArray[29]" />
                                        </td>

                                        <td class="monthName">@item1.ItemArray[16]</td>


                                    </tr>
                                            }
                                            else if (Convert.ToInt32(item1.ItemArray[19]) < Convert.ToInt32(item1.ItemArray[4]) && Convert.ToInt32(item1.ItemArray[19])>0)
                                            {
                                    <tr style="background-color:paleturquoise">
                                        <td> <input type="checkbox" class="checkBoxCls" id="checkboxPrimary3"></td>

                                        <td class="poNo"><a href="#" onclick="ShowStlData(@item1.ItemArray[26]);return false;"><label name="stlNo" style="cursor:pointer">@item1.ItemArray[2] </label></a></td>
                                        <td class="stlNo">@item1.ItemArray[3]</td>
                                        <td class="poQty">@item1.ItemArray[4]</td>
                                        <td class="mcndesc">@item1.ItemArray[20]</td>
                                        <td class="mcndesc">@item1.ItemArray[30]</td>
                                        <td class="yrnInHouseDt">@item1.ItemArray[21]</td>
                                        <td class="yrnTrnDt">@item1.ItemArray[22]</td>
                                        <td class="smpApDt">@item1.ItemArray[23]</td>
                                        <td class="BlkApDt">@item1.ItemArray[24]</td>
                                        <td class="tstApDt">@item1.ItemArray[25]</td>
                                        <td class="PlanStatus">@item1.ItemArray[18]</td>
                                        <td class="planningQty">@item1.ItemArray[19]</td>
                                        <td class="iniPlanDt">@Convert.ToDateTime(item1.ItemArray[5].ToString()).ToString("dd MMM yyyy")</td>
                                        <td class="gaugeDesc">@item1.ItemArray[6]</td>
                                        @{
                                            if (item1.ItemArray[7].ToString() == "1/1/1900 12:00:00 AM" || item1.ItemArray[7].ToString() == "" || item1.ItemArray[7].ToString() == null)
                                            {
                                                <td></td>

                                            }
                                            else
                                            {
                                                <td class="poEntryDt">@Convert.ToDateTime(item1.ItemArray[7].ToString()).ToString("dd MMM yyyy")</td>
                                            }

                                        }
                                        <td class="remarks">@item1.ItemArray[8]</td>
                                        <td class="exfactory">@Convert.ToDateTime(item1.ItemArray[9].ToString()).ToString("dd MMM yyyy")</td>
                                        <td class="pocolor">@item1.ItemArray[10]</td>
                                        <td class="burName">@item1.ItemArray[11]</td>
                                        <td class="merchentNm">@item1.ItemArray[12]</td>
                                        <td class="seasonName">@item1.ItemArray[13]</td>
                                        <td class="stlStatus">@item1.ItemArray[14]</td>
                                        <td class="shipMode">
                                            @item1.ItemArray[15]
                                            <input type="hidden" class="mcnId" value="@item1.ItemArray[27]" />
                                            <input type="hidden" class="stdCode" value="@item1.ItemArray[26]" />
                                            <input type="hidden" class="poCode" value="@item1.ItemArray[01]" />
                                            <input type="hidden" class="smvKn" value="@item1.ItemArray[28]" />
                                            <input type="hidden" class="critType" value="@item1.ItemArray[29]" />
                                        </td>
                                        <td class="monthName">
                                            @item1.ItemArray[16]
                                        </td>

                                        @*<td class="mcnId">@item1.ItemArray[27]</td>
                                            <td class="stdCode">@item1.ItemArray[26]</td>
                                            <td class="poCode">@item1.ItemArray[01]</td>
                                            <td class="smvKn">@item1.ItemArray[28]</td>
                                            <td class="critType">@item1.ItemArray[29]</td>*@

                                    </tr>
                                }
                                else
                                {
                                    <tr style="background-color:lightcoral">
                                        <td> <input type="checkbox" class="checkBoxCls" id="checkboxPrimary3"></td>

                                        <td class="poNo"><a href="#" onclick="ShowStlData(@item1.ItemArray[26]);return false;"><label name="stlNo" style="cursor:pointer">@item1.ItemArray[2] </label></a></td>
                                        <td class="stlNo">@item1.ItemArray[3]</td>
                                        <td class="poQty">@item1.ItemArray[4]</td>
                                        <td class="mcndesc">@item1.ItemArray[20]</td>
                                        <td class="mcndesc">@item1.ItemArray[30]</td>
                                        <td class="yrnInHouseDt">@item1.ItemArray[21]</td>
                                        <td class="yrnTrnDt">@item1.ItemArray[22]</td>
                                        <td class="smpApDt">@item1.ItemArray[23]</td>
                                        <td class="BlkApDt">@item1.ItemArray[24]</td>
                                        <td class="tstApDt">@item1.ItemArray[25]</td>
                                        <td class="PlanStatus">@item1.ItemArray[18]</td>
                                        <td class="planningQty">@item1.ItemArray[19]</td>
                                        <td class="iniPlanDt">@Convert.ToDateTime(item1.ItemArray[5].ToString()).ToString("dd MMM yyyy")</td>
                                        <td class="gaugeDesc">@item1.ItemArray[6]</td>
                                        @{
                                            if (item1.ItemArray[7].ToString() == "1/1/1900 12:00:00 AM" || item1.ItemArray[7].ToString() == "" || item1.ItemArray[7].ToString() == null)
                                            {
                                                <td></td>

                                            }
                                            else
                                            {
                                                <td class="poEntryDt">@Convert.ToDateTime(item1.ItemArray[7].ToString()).ToString("dd MMM yyyy")</td>
                                            }

                                        }
                                        <td class="remarks">@item1.ItemArray[8]</td>
                                        <td class="exfactory">@Convert.ToDateTime(item1.ItemArray[9].ToString()).ToString("dd MMM yyyy")</td>
                                        <td class="pocolor">@item1.ItemArray[10]</td>
                                        <td class="burName">@item1.ItemArray[11]</td>
                                        <td class="merchentNm">@item1.ItemArray[12]</td>
                                        <td class="seasonName">@item1.ItemArray[13]</td>
                                        <td class="stlStatus">@item1.ItemArray[14]</td>
                                        <td class="shipMode">
                                            @item1.ItemArray[15]
                                            <input type="hidden" class="mcnId" value="@item1.ItemArray[27]" />
                                            <input type="hidden" class="stdCode" value="@item1.ItemArray[26]" />
                                            <input type="hidden" class="poCode" value="@item1.ItemArray[01]" />
                                            <input type="hidden" class="smvKn" value="@item1.ItemArray[28]" />
                                            <input type="hidden" class="critType" value="@item1.ItemArray[29]" />
                                        </td>
                                        <td class="monthName">
                                            @item1.ItemArray[16]
                                        </td>


                                    </tr>
                                }

                            }
                        </tbody>

                    </table>
                </div>
            </div>



        </form>
        @*<div class="card-footer">
                <button type="submit" onclick="Add()" class="float-right btn btn-primary">Submit</button>
            </div>*@
    </div>
}
@section Scripts{
    <script>
        $(function () {
            debugger;
            //var groupColumn = 16;
            //for (let i = 1; i <= 7; i++) {

            //    var table = $('#InitalPlanning_' + i).DataTable({
            //        "columnDefs": [
            //            { "visible": false, "targets": groupColumn }
            //        ],
            //        "order": [[groupColumn, 'asc']],
            //        "displayLength": -1,
            //        "paging": false,
            //        "fixedHeader": true,
            //        "drawCallback": function (settings) {
            //            var api = this.api();
            //            var rows = api.rows({ page: 'current' }).nodes();
            //            var last = null;

            //            api.column(groupColumn, { page: 'current' }).data().each(function (group, i) {
            //                if (last !== group) {
            //                    $(rows).eq(i).before(
            //                        '<tr class="group"><td colspan="15"   style="float:left">' + group + '</td></tr>'
            //                    );

            //                    last = group;
            //                }
            //            });
            //        }
            //    });
            //}
        });

    </script>
}